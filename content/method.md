## Method
{:#Method}
In this section we will formally introduce the metric, explain its componenets, and finally discuss what information query engines should track to compute it.

### Relevant Traversal Path
{:##relevanttraversalpath}

<!-- In LTQP, queries are defined by their basic graph pattern (BGP) $$ B $$, seed URI's $$ S $$, reachability criterion $$ c $$, and data web $$ W $$. During query execution over $$ W $$ the seed URIs $$ S $$ are dereferenced first. From this data, new URIs to follow are extracted in accordence to the BGP $$ B $$ and chosen reachability criterion $$ c $$.  -->
During LTQP, the engine must dereference all documents that contribute to the query result set to complete the query. However, during the traversal the engine will likely dereference irrelevant documents that do not produce triples required to answer the query. By tracking the source document for each solution mapping and propegating this during joins, we obtain the set $$ D_{\mathcal{Q}_{c}^{B, S}(W)} \subseteq D_{\mathcal{R}}$$ of nodes in the reachable sub-web that are required to answer the query $$ \mathcal{Q}_{c}^{B, S} $$ on data-web $$ W $$. In this [formulation](cite:cites hartig2012foundations) $$ \mathcal{Q}_{c}^{B, S}(W) $$ denotes the query result set of BGP $$ B $$ with seed documents $$ S $$ and reachability criterion $$ c $$, when executed over data-web $$ W $$. Furthermore, $$ D_{\mathcal{R}} $$ denotes the reachable sub-web of for our query, which again depends on $$ B $$, $$ S $$, $$ c $$, and $$ W $$. The formal definitions are given in [](cite:cites hartig2012foundations). We define $$ D_{\mathcal{Q}_{c}^{B, S}(W)} $$

$$
\begin{aligned}
    D_{\mathcal{Q}_{c}^{B, S}(W)} = \{ \{ d | d \in D_{\mu_{n}} \} | \mu_{n} \in \mathcal{Q}_{c}^{B, S}(W) \}.
\end{aligned}
$$

Where $$ D_{\mu_{n}} $$ denotes the set of documents required to produce solution $$ \mu_{n} \in \mathcal{Q}_{c}^{B, S}(W) $$. During query execution, documents are sequentially dereferenced and added to the queried data. This produces a traversal order of documents $$ (D_{\mathcal{R}}, \preceq) $$, a totally ordered set with order

$$
\begin{aligned}
    \preceq \text{}= d_{a} < d_{b} \text{        if    } t_{d_{a}} < t_{d_{b}} \text{,    } \forall d_{a}, d_{b} \in O_{\mathcal{Q}_{c}^{B, S}(W)} .
\end{aligned}
$$

With $$ t_{d_{a}} $$ the timestamp when document $$ d_{a} $$ is dereferenced by the engine. Note that in the case of deterministic http request times, this ordering is produced by applying a traversal order algorithm $$ \pi $$ during the execution of query $$ \mathcal{Q}_{c}^{B, S}(W) $$. 
Using this ordering, we define the totally ordered set $$ R_{\mathcal{Q}_{c}^{B, S}(W)} = (\bigcup\limits_{j=1}^{n} D_{(\mathcal{Q}_{c}^{B, S}(W), j)}, \preceq )$$, the set of query relevant documents ordered by their dereference time. We use this to define the minimal set of dereferenced documents required to dereference all documents as follows:

$$
\begin{aligned}
   O^{r}_{\mathcal{Q}_{c}^{B, S}(W)} = \{ d_{i} \in D_{\mathcal{R}} | t_{d_{i}} < \text{max}_{t_{j} \in  R_{\mathcal{Q}_{c}^{B, S}(W)} }(t_{j})  \}.
\end{aligned}
$$


### Optimal Traversal Path for Induced Sub-Web
{:##traversedsubweb}

To compare the performance of link traversal algorithms to an optimal oracle algorithm we will first introduce the traversed topology during LTQP.
During query execution, the engine traverses the sub-web $$ W^{(S,B)}_{c} $$ of documents available from $$ W $$, given BGP $$ B $$, seed documents $$ S $$, and reachability criterion $$ c $$. As during traversal previously referenced documents will never be dereferenced again, the engine's traversal path produces a Directed Acyclic Graph (DAG) $$ T_{W^{(S,B)}_{c}} $$ with sources $$ S $$.

In this formulation, we can consider the set $$ D_{\mathcal{Q}_{c}^{B, S}(W)} $$ to be a set of terminals in $$ T_{W^{(S,B)}_{c}} $$, then finding the optimal traversal path for the engine is equivalent to finding the minimum directed steiner tree of $$ T_{W^{(S,B)}_{c}} $$, with roots $$ S $$ and terminals $$ T_{W^{(S,B)}_{c}} $$.

steiner tree is partially ordered set with order being a > b if $$ \exists edge A to B in G $$

### METRIC NAME HERE
{:##idem}

Given the optimal traversal path ... and realised minimal engine traversal path $$ O^{r}_{\mathcal{Q}_{c}^{B, S}(W)} $$ we can define a metric that measures the relative performance of the engine to the optimal approach. This is defined as:

$$
\begin{aligned}
    metricnamehere = \dfrac{| O^{r}_{\mathcal{Q}_{c}^{B, S}(W)} |}{| Optimal set of nodes|}
\end{aligned}
$$

For this metric, lower is better, as this signifies that the traversal path generated by the engine is closer to optimal.
TODO: Show that if for engine A the metric is higher than engine B ( in deterministic sequential http request / compute time per operation ) -> the traversal path is strictly worse
TODO: Define optimal traversal path using steiner tree and DAG formulation  of sub-web.

NAME HERE is defined as the length of the traversal path to get all relevant documents divided by the optimal traversal path computed in hindsight.
To determine the impact link prioritizatio nalgorithms have on performance the engine must first track its traversal order